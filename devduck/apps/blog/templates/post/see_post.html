{% extends 'global/base.html' %}
{% load static %}
{% block title %} {{ object.title }} {% endblock %}

{% block style %}{% endblock %}

{% block content %}

{% if user == object.id_user %}
<div class="button-bottom-right">
    <a class="button-transaction button-delete" href="{% url 'delete_post' object.id %}"><button>Deletar</button></a>
    <a class="button-transaction button-edit" href="{% url 'edit_post' object.id %}"><button>Editar</button></a>
</div>
{% endif %}

<article>
    <a href="{% url 'like_post' object.id %}">
        <img src="{% static 'global/img/egg.svg' %}" alt="Imagem de like"> {{ like }}
    </a>
</article>

<section>
    <h1>{{ object.title }}</h1>
    <p>Usuário: {{ object.id_user.username }}</p>
    <p>Linguagem de Programação: {{ object.id_prog_language }}</p>
    <p>Grade: {{ object.id_grid }}</p>
    <p>Data de Criação: {{ object.created_at|date }}</p>
</section>

<textarea name="content" id="markdown" cols="30" rows="10" style="display: none;">{{ object.content }}</textarea>

<div id="html"></div>

{% endblock %}


{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.4.0/showdown.min.js"></script>
<script>
    var markdown = document.getElementById("markdown").value;
    var converter = new showdown.Converter();
    var html = converter.makeHtml(markdown);
    document.getElementById("html").innerHTML = html;
</script>
{% endblock %}